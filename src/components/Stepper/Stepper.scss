/* Stepper.scss
   Adjusted so the track has safe left/right gutter; dots and labels are positioned
   by JS pixel measurement (so they sit exactly above the visible track).
*/

/* Colour tokens */
$green-dot: #35d179;
$green-line: #23c55e;
$blue-dot: #4154ff;
$gray-dot: #9b9baa;
$track-bg: #dfe2ea;
$text-color: #111;
$font: "Poppins", -apple-system, BlinkMacSystemFont, sans-serif;

.stepper {
  position: relative;
  width: 100%;
  min-height: 88px; /* ensures there's enough vertical room for labels */
  box-sizing: border-box;

  /* Add horizontal padding so content / UI chrome doesn't overlap the extreme dots.
     The track will be inset by the same gutter via left/right below. */
  padding-left: 48px;
  padding-right: 48px;
}

/* Track: inset from the container edges by the same safe gutter */
.track {
  position: absolute;
  left: 48px; /* inset to keep the first dot away from the absolute left edge */
  right: 48px; /* inset to keep last dot away from the absolute right edge */
  top: 28px; /* vertical position */
  height: 3px;
  background: $track-bg;
  border-radius: 2px;
  overflow: hidden;
  z-index: 1;

  .fill {
    height: 3px;
    background: $green-line;
    border-radius: inherit;
    transition: width 240ms cubic-bezier(0.4, 0, 0.2, 1);
  }
}

/* Each step is positioned absolutely by the JS-calculated left (in px).
   The .step container is centered on that X coordinate with translateX(-50%). */
.step {
  position: absolute;
  top: 28px; /* align vertically with the track center */
  transform: translateX(-50%);
  display: flex;
  flex-direction: column;
  align-items: center;
  z-index: 2;
  pointer-events: none;
}

/* Dot: solid circle, no border/shadow */
.dot {
  width: 27px;
  height: 27px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;

  /* center the dot above the track */
  position: absolute;
  left: 50%;
  top: 0;
  transform: translate(-50%, -50%);
}

/* Dot states (backend must use these status strings) */
.dot.done {
  background: $green-dot;
}
.dot.active {
  background: $blue-dot;
}
.dot.pending {
  background: $gray-dot;
}

/* Label (centered below the dot) */
.label {
  position: absolute;
  top: 44px; /* 32px dot + ~12px gap for improved separation and to avoid overlapping UI chrome */
  left: 50%;
  transform: translateX(-50%);
  white-space: nowrap;
  font: 700 16px/1 $font;
  color: $text-color;
  z-index: 2;
}

/* Small screens: allow wrapping */
@media (max-width: 520px) {
  .stepper {
    padding-left: 16px;
    padding-right: 16px;
  }
  .track {
    left: 16px;
    right: 16px;
  }
  .label {
    font-size: 12px;
    white-space: normal;
    max-width: 70px;
  }
}
